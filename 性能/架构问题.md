18. 未实现文件变更检测 ⚠️⚠️⚠️

   当前状态：

     - preload.cjs 暴露了 setDirty API (line 19)
     - 但 main.js 从未调用
     - 用户编辑后关闭窗口，没有"未保存"提示

   严重后果：

     - 用户可能丢失数小时工作成果
     - 没有 "您有未保存的更改" 对话框
     - macOS 标题栏不显示圆点标记

   缺失逻辑：

     // 应该在 initEditor 中添加
     vditor = new Vditor('vditor', {
       // ...
       input: (value) => {
         if (window.electronAPI) {
           window.electronAPI.setDirty(true)  // ❌ 完全缺失
         }
       },
       after: () => {
         // 保存成功后应该：
         // window.electronAPI.setDirty(false)  // ❌ 也缺失
       }
     })

   修复优先级：🔥 P0 - 数据丢失风险

   处理进度：

  - [✅ 已修复] `markDirtyState()` 统一维护渲染侧脏标记，并通过 `window.electronAPI.setDirty` 同步到主进程。
  - [✅ 已修复] 初始化和保存回调会重置脏状态，同时为已保存文件调度自动保存。

   -------------------------------------------------------------------------------

   19. 缺少关闭前确认 (electron/main.cjs) ⚠️⚠️⚠️

     mainWindow.on('closed', () => {
       mainWindow = null
     })
     // ❌ 没有 'close' 事件监听

   问题：

     - 即使检测到未保存（问题18），也不会弹出确认对话框
     - 应该在 close 事件中 event.preventDefault() 并询问

   缺失代码：

     mainWindow.on('close', (event) => {
       if (hasUnsavedChanges) {  // ❌ 这个变量都不存在
         event.preventDefault()
         // 显示对话框
       }
     })

     处理进度：

       - [✅ 已修复] 主进程新增 `hasUnsavedChanges` 状态并在 `close` 事件弹出对话框提供“保存并退出 / 放弃更改 / 取消”选项。
       - [✅ 已修复] 选择保存时会等待渲染进程保存成功再自动退出，放弃更改则直接关闭并清理脏标记。

   -------------------------------------------------------------------------------

   20. Electron环境检测不完整 (main.js:393,404,410,422,433) ⚠️⚠️

     function setupElectronHandlers() {
       if (window.electronAPI) {  // ❌ 只检查了一次
         window.electronAPI.onNewFile(() => {
           if (vditor) {  // ❌ 每个回调都检查vditor

   问题：

     - 在浏览器中打开会静默失败
     - 没有降级到localStorage或警告用户
     - 应该提供纯Web版本功能

   建议架构：

     const isElectron = !!(window.electronAPI)
     const storage = isElectron
       ? new ElectronStorage()
       : new BrowserStorage()  // ❌ 完全缺失

     处理进度：

       - [✅ 已修复] 渲染进程统一通过 `isElectron` 判断环境，缺省情况下改为启用浏览器模式初始化并在 DOMContentLoaded 时选择 Electron IPC 或本地持久化分支。
       - [✅ 已修复] 浏览器模式增加 localStorage 自动保存、卸载拦截和提示信息，确保纯 Web 访问不会静默失败。

   -------------------------------------------------------------------------------

   21. 缺少自动保存 ⚠️⚠️

   用户体验问题：

     - 现代编辑器都有自动保存
     - VSCode每秒自动保存
     - 本项目完全依赖手动Ctrl+S

   建议实现：

     let autoSaveTimer = null
     function scheduleAutoSave() {
       clearTimeout(autoSaveTimer)
       autoSaveTimer = setTimeout(() => {
         if (currentFilePath && hasUnsavedChanges) {
           saveFile()  // ❌ 这个功能不存在
         }
       }, 3000)
     }

   处理进度：

     - [✅ 已修复] 渲染进程在检测到脏内容且已有保存路径时，会在 3 秒后自动保存，并在连续自动保存间隔上限 10 秒内去抖处理。
     - [✅ 已修复] 自动保存成功后同步清理脏标记，失败则在 toast 中提示错误原因。

   -------------------------------------------------------------------------------

   🐛 运行时逻辑错误

   22. 图片上传filename不安全 (main.js:130) ⚠️⚠️

     const altText = file.name.replace(/[\[\]]/g, '')
     vditor.insertValue(`![${altText}](${result})\n`)

   严重问题：

     - 文件名可能包含 )：image).jpg
       - 结果：![image).jpg](data:...)  ← Markdown解析错误
     - 文件名可能包含换行符（特殊攻击）
     - 文件名可能是 ../../../etc/passwd

   修复：

     const altText = file.name
       .replace(/[\[\]()]/g, '')  // 移除更多特殊字符
       .replace(/\n/g, ' ')       // 移除换行
       .substring(0, 100)         // 限制长度

   处理进度：

     - [✅ 已修复] 上传流程使用 `sanitizeAltText()` 清理文件名中的控制字符、括号与换行，并限制为 100 字符，默认回退为 `image`。

   -------------------------------------------------------------------------------

   23. FileReader内存泄漏 (main.js:125,154,159) ⚠️⚠️

     fileArray.forEach((file) => {
       const reader = new FileReader()  // ❌ 创建多个
       reader.onload = () => { /* ... */ }
       reader.onerror = () => { /* ... */ }
       reader.readAsDataURL(file)
     })

   问题：

     - 如果用户选择100张图片
     - 创建100个FileReader对象
     - 同时读取100个文件 → 内存峰值可能超过500MB
     - 浏览器可能限制并发或崩溃

   修复：使用队列，限制并发为3-5个

   处理进度：

     - [✅ 已修复] 图片读取采用最多 3 个并行的 FileReader 队列，按索引收集结果后一次性插入 Markdown，避免瞬间占用过多内存。

   -------------------------------------------------------------------------------

   24. Toast显示时序错误 (main.js:103-107) ⚠️

     if (successCount > 0) {
       showToast(`已插入${successCount}张图片`)
     }
     if (oversized.length > 0) {
       showToast(`以下图片超过 5MB 未插入：${oversized.join('、')}`)
     }
     if (failed.length > 0) {
       showToast(`以下图片读取失败：${failed.join('、')}`)
     }

   问题：

     - 可能同时显示3个Toast，重叠在一起
     - 用户可能只看到最后一个
     - 应该合并为一个Toast或使用队列

   处理进度：

     - [✅ 已修复] 上传反馈整合为单条 toast，按行展示成功、超限与失败文件，并在显示前复用现有提示元素与计时器。

   -------------------------------------------------------------------------------

   25. toolbar配置缩进混乱 (main.js:163-189) ⚠️

     toolbar: [
       'headings',    // 2空格
       'bold',
       // ...
       '|',
       'table',       // 2空格
       '|',
     'preview',       // ❌ 0空格
     'both',          // ❌ 0空格
       'export',      // 2空格

   问题：

     - 不一致的缩进（line 185-186）
     - 暗示可能是后期手动添加
     - ESLint应该捕获但未配置

   -------------------------------------------------------------------------------

   26. 预览延迟过长 (main.js:205) ⚠️

     preview: {
       delay: 500,  // ❌ 半秒延迟

   用户体验：

     - 用户输入后半秒才看到预览
     - 主流编辑器都是50-100ms
     - Typora甚至是实时（0ms）

   建议：改为 100-200

   处理进度：

     - [✅ 已修复] 预览渲染延迟缩短为 150ms，提升实时反馈体验。

   -------------------------------------------------------------------------------

   27. 错误信息HTML注入风险 (main.js:221) ⚠️⚠️

     editorElement.innerHTML = `
       <pre style="...">${error.message}</pre>
            ^^^^^^^^^^ ❌ 直接插入未转义的错误信息
     `

   安全风险：

     - 如果 error.message 包含 <script>alert('XSS')</script>
     - 虽然是本地应用，但仍是不良实践
     - 应该使用 textContent 或转义HTML

   -------------------------------------------------------------------------------

   28. MutationObserver触发过于频繁 (main.js:338-346) ⚠️⚠️

     const observer = new MutationObserver((mutationsList) => {
       for (const mutation of mutationsList) {
         if (mutation.type !== 'childList') continue
         const outlines = editorElement.querySelectorAll('.vditor-outline')
         outlines.forEach(ensureResizer)  // ❌ 每次DOM变化都查询
       }
     })
     observer.observe(editorElement, { childList: true, subtree: true })

   性能问题：

     - 用户输入每个字符 → DOM变化 → 触发回调
     - 但大多数时候outline没有变化
     - 应该只监听 outline 容器而不是整个编辑器

   优化：

     observer.observe(editorElement, {
       childList: true,
       subtree: false  // ✅ 只监听直接子元素
     })

   处理进度：

     - [✅ 已修复] 限制 MutationObserver 仅监听顶层子节点，并对 outline 根元素增量处理，避免每次变动遍历整棵 DOM。

   -------------------------------------------------------------------------------

   29. 缺少键盘快捷键反馈 ⚠️

   当前状态：

     - Electron菜单定义了快捷键 (main.cjs:185,190,198,205)
     - 但Web版没有快捷键
     - 用户在浏览器中按Ctrl+S → 浏览器保存页面

   建议：

     document.addEventListener('keydown', (e) => {
       if (e.ctrlKey && e.key === 's') {
         e.preventDefault()
         if (!isElectron) {
           // 提示用户使用Electron版本
           showToast('请在桌面应用中使用保存功能')
         }
       }
     })

   处理进度：

     - [✅ 已修复] 浏览器模式拦截 Ctrl/Cmd+S 快捷键并提示用户使用桌面版保存。

   -------------------------------------------------------------------------------

   ⚡ 性能优化机会

   30. Vditor配置未优化 (main.js:67-204) ⚠️

     cache: {
       enable: false  // ❌ 禁用了缓存
     }

   问题：

     - 用户刷新页面 → 内容丢失
     - 应该在Electron环境禁用，浏览器环境启用

     cache: {
       enable: !window.electronAPI  // ✅ 浏览器环境启用缓存
     }

   处理进度：

     - [✅ 已修复] 渲染进程在 Electron 环境禁用 Vditor 缓存，在浏览器环境启用。

   -------------------------------------------------------------------------------

   31. outline默认展开 (main.js:200-203) ⚠️

     outline: {
       enable: true,
       position: 'left',
     }

   用户体验：

     - 默认显示outline，对短文档是浪费空间
     - 应该根据文档结构动态决定

   建议：

     outline: {
       enable: true,
       position: 'left',
     }
     // 在 after 回调中：
     if (vditor.getValue().split('\n').length < 50) {
       // 隐藏outline for short documents
     }

   -------------------------------------------------------------------------------

   32. 未使用Vditor的undo配置 ⚠️

     // ❌ 完全没有配置 undo
     vditor = new Vditor('vditor', {
       // ...
       // 缺少 undoDelay 配置
     })

   问题：

     - 使用默认的800ms延迟
     - 对打字快的用户体验不佳
     - 建议改为300-500ms

   -------------------------------------------------------------------------------

   33. hljs样式hardcoded (main.js:208) ⚠️

     hljs: {
       enable: true,
       style: 'github',  // ❌ 写死
       lineNumber: true
     }

   扩展性问题：

     - 用户无法切换主题
     - 应该从配置文件读取或提供设置UI

   -------------------------------------------------------------------------------

   34. 数学公式引擎未优化 (main.js:216-218) ⚠️

     math: {
       engine: 'KaTeX',  // ❌ 只支持KaTeX
     }

   问题：

     - KaTeX比MathJax快但功能少
     - 应该让用户选择
     - 对于不使用数学公式的用户是冗余加载

   -------------------------------------------------------------------------------

  35. 本地 CDN 目录结构不匹配导致资源 404（net::ERR_FILE_NOT_FOUND）🔥 P0

  现象：

  - Electron 发行包启动后，控制台报错：Failed to load resource: net::ERR_FILE_NOT_FOUND；index.html:1 Uncaught (in promise) Event。
  - 该问题在“切换为本地加载 Vditor 资源”之前不存在。

  根因分析：

  - 我们在 `src/main.js` 设置了 `cdn: './vditor'`，Vditor 内部会按 `${cdn}/dist/js/...` 的相对路径去动态加载依赖。
  - 但当时仅将 `node_modules/vditor/dist` 拷贝到了 `public/vditor/`，导致实际生成的路径为 `./vditor/js/...`（缺少中间的 `dist/` 目录）。
  - 运行期 Vditor 试图访问 `./vditor/dist/js/...`，自然就 404 导致 `net::ERR_FILE_NOT_FOUND`。

  修复：

  - 改为拷贝 Vditor 包的根目录到 `public/vditor/`，从而在构建后得到 `dist/vditor/dist/js/...` 与 Vditor 预期路径完全一致。
  - 当前 `cdn: './vditor'` 配置保持不变，所有资源均从应用自身加载，符合 CSP 要求的 `script-src 'self'`。

  旁注（后续优化/限制）：

  - Vditor 的 PlantUML 渲染器默认使用 `https://www.plantuml.com/plantuml/...` 远程服务，这会被现有 CSP 阻止；若需完全离线，可考虑禁用该渲染器或引入本地渲染方案。
  - Vditor 某些功能（如 ECharts 配置解析）和个别加载器会使用 `Function(...)` 或内联脚本注入，对严格 CSP（禁止 `unsafe-eval`、`unsafe-inline`）可能产生告警；短期建议保持 KaTeX 引擎与默认功能集，避免触发相关路径。

  处理进度：

  - [✅ 已修复] 重新布置 `public/vditor/` 为包根目录，构建产物包含 `dist/vditor/dist/...`，路径与运行时请求一致。
  - [ℹ️ 待评估] 如需彻底消除远程请求与内联评估，请在“功能期望”明确 PlantUML/ECharts 使用场景，我们可基于 Vditor 提供选择性禁用或替换方案。

  -------------------------------------------------------------------------------

   🔒 安全问题

   35. CSP完全缺失 (index.html) ⚠️⚠️⚠️

     <head>
         <meta charset="UTF-8">
         <!-- ❌ 没有 Content-Security-Policy -->

   安全风险：

     - 如果用户打开恶意Markdown文件
     - 可能包含 <img src=x onerror=alert()>
     - 虽然Vditor应该转义，但多一层防护更好

   建议：

     <meta http-equiv="Content-Security-Policy"
           content="default-src 'self';
                    img-src 'self' data: https:;
                    style-src 'self' 'unsafe-inline';">

   -------------------------------------------------------------------------------

   36. Electron sandbox关闭的理由不明 (main.cjs:94) ⚠️⚠️

     webPreferences: {
       preload: resolvePreloadPath(),
       nodeIntegration: false,      // ✅ 好
       contextIsolation: true,      // ✅ 好
       sandbox: false               // ❌ 为什么？
     }

   安全问题：

     - 注释没有解释为何关闭sandbox
     - 尝试启用可能可以工作
     - 如果必须关闭，应该在注释中说明原因

     处理进度：

       - [✅ 已修复] 在 `webPreferences.sandbox` 旁补充注释说明因 preload 使用 Node 模块暂时必须关闭，后续计划迁移后再启用。

   -------------------------------------------------------------------------------

   37. 文件路径未校验 (electron/main.cjs:148) ⚠️⚠️

     const content = await fsPromises.readFile(filePath, 'utf8')
     // ❌ 没有检查路径是否在允许的目录中

   虽然使用了对话框，但在 open-file 事件中：

     app.on('open-file', (_event, filePath) => {
       // filePath 来自操作系统，但仍应校验
       const content = await fsPromises.readFile(filePath, 'utf8')

   风险：

     - macOS 恶意软件可能触发 open-file 事件
     - 传入 /etc/passwd

   修复：

     const path = require('path')
     const normalized = path.resolve(filePath)
     if (normalized.startsWith('/etc/') || normalized.startsWith('C:\\Windows')) {
       throw new Error('Forbidden path')
     }

   处理进度：

     - [✅ 已修复] 主进程新增 `assertSafeFilePath()` 校验，并在打开、保存与 `open-file` 事件中统一调用，同时对高危目录直接拒绝。

   -------------------------------------------------------------------------------

   📐 代码质量问题

   38. 函数职责不单一 (main.js:66-227) ⚠️

     function initEditor() {
       try {
         vditor = new Vditor('vditor', { /* 160行配置 */ })
         return vditor
       } catch (error) {
         // 40行错误处理
       }
       return null
     }

   问题：

     - 函数长度162行
     - 混合了配置、初始化、错误处理
     - 难以测试

   重构建议：

     function getVditorConfig() { /* 返回配置对象 */ }
     function handleEditorError(error) { /* 处理错误 */ }
     function initEditor() {
       const config = getVditorConfig()
       try {
         return new Vditor('vditor', config)
       } catch (error) {
         handleEditorError(error)
         return null
       }
     }

   -------------------------------------------------------------------------------

   39. 魔法字符串 (main.js, main.cjs) ⚠️

     // main.js
     sendToRenderer('menu:open-file', { filePath, content })
     sendToRenderer('menu:save-file')
     sendToRenderer('menu:save-as-file')

     // main.cjs
     window.electronAPI.onNewFile(...)
     window.electronAPI.onOpenFile(...)

   问题：

     - 事件名是字符串，拼写错误不会被发现
     - 重命名需要手动查找替换

   建议：

     const IPC_EVENTS = {
       NEW_FILE: 'menu:new-file',
       OPEN_FILE: 'menu:open-file',
       SAVE_FILE: 'menu:save-file',
       SAVE_AS: 'menu:save-as-file'
     }

   -------------------------------------------------------------------------------

   40. 未使用const/let一致性 (main.js) ⚠️

     let vditor = null  // ✅ 会重新赋值
     let processedCount = 0  // ✅ 会递增
     const MAX_INLINE_IMAGE_SIZE = 5 * 1024 * 1024  // ✅ 常量

     // 但是：
     const finalize = () => {  // ❌ 函数表达式用const
       processedCount += 1
     }

   不一致：

     - 有时用 function，有时用 const fn = () =>
     - 应该统一风格

   -------------------------------------------------------------------------------

   41. 缺少JSDoc注释 ⚠️

     function initOutlineResizer() {  // ❌ 没有文档
       const editorElement = document.getElementById('vditor')
       // ...
     }

   维护问题：

     - 函数参数、返回值未说明
     - 新开发者难以理解
     - 建议至少为公共函数添加JSDoc

   -------------------------------------------------------------------------------

   42. 错误对象未标准化 ⚠️

     // electron/main.cjs
     return { success: false, error: error.message }  // main.cjs:255
     return { success: false, canceled: true }        // main.cjs:246

   不一致：

     - 有时返回 error
     - 有时返回 canceled
     - 应该统一错误格式

   建议：

     // 统一格式
     {
       success: boolean,
       data?: any,
       error?: { code: string, message: string }
     }

   -------------------------------------------------------------------------------

   🎨 用户体验问题

   43. 无加载指示器 ⚠️⚠️

     function initEditor() {
       try {
         vditor = new Vditor('vditor', { /* ... */ })
         // ❌ Vditor加载需要时间，但没有loading状态

   体验：

     - 打开应用后 1-2 秒白屏
     - 用户不知道是否卡死
     - 应该显示 "加载中..."

   -------------------------------------------------------------------------------

   44. 错误提示用户不友好 ⚠️

     dialog.showErrorBox('打开文件失败', error.message)

   问题：

     - error.message 可能是英文或技术性
     - 例如：ENOENT: no such file or directory
     - 普通用户看不懂

   建议：

     const friendlyMessage = translateError(error)
     dialog.showErrorBox('打开文件失败', friendlyMessage)

     function translateError(error) {
       if (error.code === 'ENOENT') return '文件不存在'
       if (error.code === 'EACCES') return '没有访问权限'
       return '未知错误，请重试'
     }

   处理进度：

     - [✅ 已修复] 引入 `translateFileSystemError()`，所有文件操作统一返回友好提示，并在 IPC 响应中附带错误码支持 UI 展示。

   -------------------------------------------------------------------------------

   45. 缺少导出格式选项 ⚠️

     toolbar: [
       // ...
       'export',  // ❌ 只能导出为HTML

   局限性：

     - Vditor的export只导出HTML
     - 用户可能想要PDF、Word、纯文本
     - 应该扩展导出功能

   -------------------------------------------------------------------------------

   46. 无最近文件列表 ⚠️⚠️

   功能缺失：

     - 用户每次都要浏览文件夹
     - macOS有 app.addRecentDocument()
     - Windows应该用注册表或配置文件

   建议实现：

     // electron/main.cjs
     const recentFiles = []
     function addRecentFile(filePath) {
       recentFiles.unshift(filePath)
       recentFiles.splice(5)  // 只保留5个
       app.addRecentDocument(filePath)
     }

   -------------------------------------------------------------------------------

   47. 工具栏无法自定义 ⚠️

     toolbar: [
       'headings', 'bold', /* ... hardcoded ... */
     ]

   扩展性：

     - 用户可能不需要某些按钮
     - 应该从配置文件读取
     - 或提供设置界面

   -------------------------------------------------------------------------------

   🧪 测试与调试

   48. 完全没有测试 ⚠️⚠️⚠️

     目录结构：
     ├── src/
     ├── electron/
     ├── dist/
     └── node_modules/
        ❌ 没有 __tests__/ 或 *.test.js

   风险：

     - 重构可能引入bug
     - 无法保证核心功能正常
     - 建议至少添加：
       - 文件保存/加载测试
       - 图片上传测试
       - IPC通信测试

   -------------------------------------------------------------------------------

   49. 缺少开发者工具切换 (main.cjs:102,109) ⚠️

     if (!app.isPackaged) {
       mainWindow.webContents.openDevTools({ mode: 'detach' })
     }
     // ❌ 生产环境无法打开DevTools调试问题

   问题：

     - 用户报告bug时无法查看控制台
     - 应该添加隐藏快捷键（如F12）

   处理进度：

     - [✅ 已修复] 主进程注册 F12 及 Ctrl/Cmd+Shift+I 快捷键，在生产环境下也可切换 DevTools，并在退出时清理快捷键。

   -------------------------------------------------------------------------------

   50. 未使用环境变量 ⚠️

     // vite.config.js
     export default defineConfig(({ mode }) => ({
       // ❌ 没有使用环境变量配置
     }))

   扩展性：

     - 无法区分开发/测试/生产环境
     - 应该用 .env 文件

   -------------------------------------------------------------------------------

   📦 构建与部署

   51. electron-builder配置不完整 (package.json:38-42) ⚠️⚠️

     "win": {
       "target": ["dir"],  // ❌ 只生成目录
       "signAndEditExecutable": false  // ❌ 未签名
     }

   生产问题：

     - Windows Defender可能报毒
     - 未签名的EXE用户不信任
     - 应该配置代码签名

   另外：

     "mac": {
       "category": "public.app-category.productivity"
       // ❌ 缺少 icon, entitlements
     }

   -------------------------------------------------------------------------------

   52. 未配置自动更新 ⚠️⚠️

   功能缺失：

     - electron-builder支持自动更新
     - 但项目未配置
     - 用户需要手动下载新版本

   建议：

     {
       "publish": {
         "provider": "github",
         "owner": "your-name",
         "repo": "wok-editor"
       }
     }

   -------------------------------------------------------------------------------

   53. 打包体积未优化 ⚠️

   当前状态：

     - Vditor完整包约10MB
     - 包含多个不需要的主题和语言
     - 应该tree-shaking

   优化：

     // 只导入需要的部分
     import Vditor from 'vditor/dist/method.min.js'

   -------------------------------------------------------------------------------

   54. dist目录被git追踪？ ⚠️

     .gitignore:
     dist/  # ✅ 已忽略

   但需要确认 git status 中没有dist文件

   -------------------------------------------------------------------------------

   🌍 国际化问题

   55. UI语言hardcoded ⚠️

     showToast('已创建新文件')
     dialog.showErrorBox('打开文件失败', ...)

   问题：

     - 全部中文，无英文支持
     - 国际用户无法使用
     - 应该使用i18n库

   -------------------------------------------------------------------------------

   56. 菜单只有中文 (main.cjs:184,189) ⚠️

     {
       label: '新建文件',  // ❌ hardcoded
       accelerator: 'CmdOrCtrl+N',

   建议：使用 electron-i18n 或自己实现

   -------------------------------------------------------------------------------

   🔧 配置管理

   57. 无配置文件 ⚠️⚠️

   功能缺失：

     - 用户设置无处保存
     - 每次打开都是默认状态
     - 应该保存：
       - 窗口大小/位置
       - 主题
       - 最近文件
       - 编辑器设置

   建议位置：

     - Windows: %APPDATA%/WOK Editor/config.json
     - macOS: ~/Library/Application Support/WOK Editor/config.json

   -------------------------------------------------------------------------------

   58. 编辑器配置不持久化 ⚠️

     outline: {
       enable: true,  // ❌ 用户关闭outline后，重启又显示
     }

   -------------------------------------------------------------------------------

   📊 监控与日志

   59. 没有错误上报 ⚠️

     process.on('uncaughtException', (error) => {
       console.error('未捕获的异常:', error)  // ❌ 只打印
     })

   问题：

     - 用户环境的错误开发者看不到
     - 应该集成Sentry或类似服务

   -------------------------------------------------------------------------------

   60. 日志级别未区分 ⚠️

     console.error(...)  // 错误
     console.info(...)   // 信息
     console.log(...)    // ❌ 没有使用

   建议：统一使用日志库（winston, pino）

